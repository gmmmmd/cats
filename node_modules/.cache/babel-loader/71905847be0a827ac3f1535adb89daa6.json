{"ast":null,"code":"var _jsxFileName = \"/home/user/work2/cats/src/App.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport Layout from './component/Layout/Layout';\nimport Homepage from './pages/HomePage/Homepage';\nimport Favoritpage from './pages/Favoritpage/Favoritpage';\nimport Notfoundpage from './pages/Notfoundpage/Notfoundpage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [cats, setCats] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [fetching, setFetching] = useState(true); // Запрос котиков\n\n  useEffect(() => {\n    if (fetching) {\n      async function fetchData() {\n        try {\n          const response = await fetch(`https://api.thecatapi.com/v1/images/search?limit=20&page=${currentPage}`, {\n            headers: {\n              'Content-Type': 'app;ication/json',\n              'x-api-key': 'e903b6b3-eaca-44ce-829a-f91cff82b3d2'\n            }\n          });\n\n          if (response.status === 200) {\n            const result = await response.json();\n            setCats([...cats, ...result]);\n            setCurrentPage(prevState => prevState + 1);\n            console.log(result);\n          }\n        } catch (error) {\n          console.log(error);\n        } finally {\n          setIsLoading(false);\n          setFetching(false);\n        }\n      }\n\n      fetchData();\n    }\n  }, [fetching, cats, currentPage]); // Подгрузка котиков при скролле\n\n  useEffect(() => {\n    const scrollHandler = e => {\n      if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) {\n        setFetching(true);\n      }\n    };\n\n    document.addEventListener('scroll', scrollHandler);\n    return () => {\n      document.removeEventListener('scroll', scrollHandler);\n    };\n  }, [setFetching]); // Подгрузка localStorage при первой загрузке\n  // useEffect(() => {\n  //   const catsFavorites = JSON.parse(\n  //     localStorage.getItem('favorites-cats')\n  //   );\n  //   if (catsFavorites) {\n  //     setFavorites(catsFavorites);\n  //   }\n  // }, []);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 34\n        }, this),\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          index: true,\n          element: /*#__PURE__*/_jsxDEV(Homepage, {\n            cats: cats,\n            fetching: fetching,\n            isLoading: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/favorit-cats\",\n          element: /*#__PURE__*/_jsxDEV(Favoritpage, {\n            isLoading: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Notfoundpage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(App, \"w3Hi5D982wxGF4lF2lyYu5LbYI4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Layout","Homepage","Favoritpage","Notfoundpage","App","cats","setCats","isLoading","setIsLoading","currentPage","setCurrentPage","fetching","setFetching","fetchData","response","fetch","headers","status","result","json","prevState","console","log","error","scrollHandler","e","target","documentElement","scrollHeight","scrollTop","window","innerHeight","document","addEventListener","removeEventListener"],"sources":["/home/user/work2/cats/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route } from 'react-router-dom';\n\nimport Layout from './component/Layout/Layout';\nimport Homepage from './pages/HomePage/Homepage';\nimport Favoritpage from './pages/Favoritpage/Favoritpage';\nimport Notfoundpage from './pages/Notfoundpage/Notfoundpage';\n\nfunction App() {\n  const [cats, setCats] = useState([])\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [fetching, setFetching] = useState(true);\n\n  // Запрос котиков\n  useEffect(() => {\n    if (fetching) {\n      async function fetchData() {\n        try {\n          const response = await fetch(`https://api.thecatapi.com/v1/images/search?limit=20&page=${currentPage}`, {\n            headers: {\n              'Content-Type': 'app;ication/json',\n              'x-api-key': 'e903b6b3-eaca-44ce-829a-f91cff82b3d2',\n            }\n          });\n          if (response.status === 200) {\n            const result = await response.json();\n            setCats([...cats, ...result]);\n            setCurrentPage(prevState => prevState + 1)\n            console.log(result)\n          }\n        }\n        catch (error) {\n          console.log(error)\n        }\n        finally {\n          setIsLoading(false)\n          setFetching(false)\n        }\n      }\n      fetchData()\n    }\n  }, [fetching, cats, currentPage])\n\n  // Подгрузка котиков при скролле\n  useEffect(() => {\n    const scrollHandler = (e) => {\n      if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) {\n        setFetching(true);\n      }\n    }\n    document.addEventListener('scroll', scrollHandler)\n    return () => {\n      document.removeEventListener('scroll', scrollHandler)\n    }\n  }, [setFetching])\n\n  // Подгрузка localStorage при первой загрузке\n  // useEffect(() => {\n  //   const catsFavorites = JSON.parse(\n  //     localStorage.getItem('favorites-cats')\n  //   );\n  //   if (catsFavorites) {\n  //     setFavorites(catsFavorites);\n  //   }\n  // }, []);\n\n  return (\n    <>\n      <Routes>\n        <Route path=\"/\" element={<Layout />}>\n          <Route index element={<Homepage\n            cats={cats}\n            fetching={fetching}\n            isLoading={isLoading}\n          />} />\n          <Route path=\"/favorit-cats\" element={<Favoritpage isLoading={isLoading} />} />\n          <Route path=\"*\" element={<Notfoundpage />} />\n        </Route>\n      </Routes>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}